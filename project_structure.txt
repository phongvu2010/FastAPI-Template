SecureDoc-Flow/
├── alembic/                            # Quản lý migration DB
│   ├── versions/
│   │   ├── .gitkeep
│   │   └── ...
│   ├── env.py
│   ├── README
│   └── script.py.mako
│
├── app/
│   ├── core/                           # [CORE-PLATFORM] - Độc lập tuyệt đối
│   │   ├── __init__.py
│   │   ├── config.py                   # Quản lý settings, Google Client ID/Secret
│   │   ├── events.py                   # Event Bus (Quan trọng cho Audit Log)
│   │   ├── exceptions.py               # Custom Exception Handlers
│   │   ├── module_loader.py            # Load modules từ thư mục /app/modules/
│   │   └── security.py                 # Base JWT logic, Password hashing
│   │
│   ├── db/                             # [CORE-PLATFORM]
│   │   ├── base_model.py               # Abstract DB Model (TimestampMixin, etc.)
│   │   └── database.py                 # SQLAlchemy Engine & SessionLocal
│   │
│   ├── modules/
│   │   ├── users/                      # [USERS] - Phụ thuộc: Core
│   │   │   ├── api/                    # API Endpoints
│   │   │   │   ├── __init__.py
│   │   │   │   ├── auth.py
│   │   │   │   └── users.py
│   │   │   │   └── views.py
│   │   │   ├── models/
│   │   │   │   ├── __init__.py
│   │   │   │   ├── role.py             # Role Model & Pydantic
│   │   │   │   └── user.py             # User Model & Pydantic
│   │   │   ├── static/
│   │   │   │   └── js/
│   │   │   │       ├── admin.js                # Logic riêng cho bảng quản trị
│   │   │   │       └── profile.js              # Logic riêng cho bảng profile
│   │   │   ├── templates/
│   │   │   │   ├── admin/                  # Templates cho Admin Panel
│   │   │   │   │   └── admin_panel.html
│   │   │   │   └── auth/                   # Templates cho Users
│   │   │   │       ├── login.html
│   │   │   │       └── profile.html
│   │   │   ├── __init__.py
│   │   │   ├── crud.py
│   │   │   ├── dependencies.py         # GetCurrentUser, PermissionChecker
│   │   │   ├── main.py                 # Main router
│   │   │   └── services.py             # Logic Google SSO, Onboarding
│   │   │
│   │   ├── documents/                  # [DOCUMENTS] - Phụ thuộc: Core, Users
│   │   │   ├── api/                    # API Endpoints
│   │   │   │   ├── __init__.py
│   │   │   │   └── ...
│   │   │   ├── models/                 # Document Metadata
│   │   │   │   ├── __init__.py
│   │   │   │   └── ...
│   │   │   ├── utils/                  # PDF Processing logic
│   │   │   │   ├── __init__.py
│   │   │   │   └── ...
│   │   │   ├── static/
│   │   │   ├── templates/              # Templates cho Documents
│   │   │   │   ├── dashboard.html
│   │   │   │   └── ...
│   │   │   ├── __init__.py
│   │   │   ├── crud.py
│   │   │   ├── main.py                 # Main router
│   │   │   └── services.py             # Hashing, State Machine
│   │   │
│   │   └── audit/                      # [AUDIT-LOGS] - Phụ thuộc: Core
│   │       ├── __init__.py
│   │       ├── models.py               # AuditLog Model (Immutable)
│   │       ├── listeners.py            # Lắng nghe sự kiện từ Event Bus
│   │       └── services.py             # Ghi log bất biến
│   │
│   ├── static/                         # CSS/JS/Images
│   │   ├── css/
│   │   │   └── style.css
│   │   ├── images/
│   │   │   └── logo.png
│   │   └── js/
│   │       └── api.js                  # Xử lý fetch, CSRF và thông báo chung
│   │
│   ├── templates/                  # Jinja2 Templates (Global hoặc chia theo module)
│   │   ├── _layout.html            # Base template
│   │   └── error_page.html
│   │
│   ├── __init__.py
│   ├── initial_data.py
│   └── main.py                     # Entry point, load các router
│
├── .dockerignore
├── .env                            # Environment variables
├── .gitignore
├── alembic.ini
├── docker-compose.yml
├── Dockerfile
├── prestart.sh
├── README.md
└── requirements.txt
